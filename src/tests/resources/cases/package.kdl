queries name="package" {
  query "top() > package dependencies[prop(platform) = \"windows\"]" index=0 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "top() > package dependencies[prop(platform) != \"windows\"]" index=1 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies {
        miette "2.0.0" dev=true
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "top() > package dependencies[prop(platform) != r#\"windows\"#] || top() > package dependencies[prop(platform) = \"windows\"]" index=2 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies {
        miette "2.0.0" dev=true
      }
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "dependencies" index=3 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
      dependencies {
        miette "2.0.0" dev=true
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "dependencies[prop(platform) ^= \"win\"]" index=4 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "dependencies[prop(platform) $= \"s\"]" index=5 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "dependencies[prop(platform) *= \"in\"]" index=6 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "dependencies[prop(platform)]" index=7 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "dependencies[platform]" index=8 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "dependencies[platform = \"windows\"]" index=9 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "lastBuiltAt[val() > 0]" index=10 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      "lastBuiltAt" 12345
    }
    "@virtualstate/kdl/output/match" true
  }
  query "lastBuiltAt[val() >= 0]" index=11 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      "lastBuiltAt" 12345
    }
    "@virtualstate/kdl/output/match" true
  }
  query "lastBuiltAt[val() < 9999999]" index=12 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      "lastBuiltAt" 12345
    }
    "@virtualstate/kdl/output/match" true
  }
  query "lastBuiltAt[val() <= 9999999]" index=13 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      "lastBuiltAt" 12345
    }
    "@virtualstate/kdl/output/match" true
  }
  query "dependencies + dependencies" index=14 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies {
        miette "2.0.0" dev=true
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "version ~ dependencies" index=15 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      dependencies platform="windows" {
        winapi "1.0.0" path="./crates/my-winapi-fork"
      }
      dependencies {
        miette "2.0.0" dev=true
      }
    }
    "@virtualstate/kdl/output/match" true
  }
  query "dependencies[prop(platform) ^= \"win\"] top() package > version" index=16 {
    input {
      package {
        name "foo"
        version "1.0.0"
        dependencies platform="windows" {
          winapi "1.0.0" path="./crates/my-winapi-fork"
        }
        dependencies {
          miette "2.0.0" dev=true
        }
        "lastBuiltAt" 12345
      }
    }
    output {
      version "1.0.0"
    }
    "@virtualstate/kdl/output/match" true
  }
}